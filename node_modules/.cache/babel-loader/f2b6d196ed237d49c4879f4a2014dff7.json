{"ast":null,"code":"import { all } from \"../utils\";\nimport _ from \"lodash\";\n\nvar Rotation = function Rotation(entities, args) {\n  var rotatables = all(entities, function (e) {\n    return e.rotation;\n  }, function (e) {\n    return e.model;\n  });\n\n  for (var i = 0; i < rotatables.length; i++) {\n    var r = rotatables[i];\n\n    if (r.model.cellIndex !== undefined) {\n      r.model.angle = _.isFunction(r.rotation) ? r.rotation(r, entities, args) : r.model.angle + r.rotation;\n    } else {\n      r.model.rotation.z = r.rotation.z ? _.isFunction(r.rotation.z) ? r.rotation.z(r, entities, args) : r.model.rotation.z + r.rotation.z : r.model.rotation.z;\n      r.model.rotation.x = r.rotation.x ? _.isFunction(r.rotation.x) ? r.rotation.x(r, entities, args) : r.model.rotation.x + r.rotation.x : r.model.rotation.x;\n      r.model.rotation.y = r.rotation.y ? _.isFunction(r.rotation.y) ? r.rotation.y(r, entities, args) : r.model.rotation.y + r.rotation.y : r.model.rotation.y;\n    }\n  }\n\n  return entities;\n};\n\nexport default Rotation;","map":{"version":3,"sources":["/home/darlington-chuks/Documents/game-engine/src/game/systems/rotation.js"],"names":["all","_","Rotation","entities","args","rotatables","e","rotation","model","i","length","r","cellIndex","undefined","angle","isFunction","z","x","y"],"mappings":"AAAA,SAASA,GAAT,QAAoB,UAApB;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,QAAD,EAAWC,IAAX,EAAoB;AACpC,MAAMC,UAAU,GAAGL,GAAG,CAACG,QAAD,EAAW,UAAAG,CAAC;AAAA,WAAIA,CAAC,CAACC,QAAN;AAAA,GAAZ,EAA4B,UAAAD,CAAC;AAAA,WAAIA,CAAC,CAACE,KAAN;AAAA,GAA7B,CAAtB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,UAAU,CAACK,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC3C,QAAME,CAAC,GAAGN,UAAU,CAACI,CAAD,CAApB;;AAEA,QAAIE,CAAC,CAACH,KAAF,CAAQI,SAAR,KAAsBC,SAA1B,EAAqC;AACpCF,MAAAA,CAAC,CAACH,KAAF,CAAQM,KAAR,GAAgBb,CAAC,CAACc,UAAF,CAAaJ,CAAC,CAACJ,QAAf,IACbI,CAAC,CAACJ,QAAF,CAAWI,CAAX,EAAcR,QAAd,EAAwBC,IAAxB,CADa,GAEbO,CAAC,CAACH,KAAF,CAAQM,KAAR,GAAgBH,CAAC,CAACJ,QAFrB;AAGA,KAJD,MAIO;AACNI,MAAAA,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBS,CAAjB,GAAqBL,CAAC,CAACJ,QAAF,CAAWS,CAAX,GAClBf,CAAC,CAACc,UAAF,CAAaJ,CAAC,CAACJ,QAAF,CAAWS,CAAxB,IACCL,CAAC,CAACJ,QAAF,CAAWS,CAAX,CAAaL,CAAb,EAAgBR,QAAhB,EAA0BC,IAA1B,CADD,GAECO,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBS,CAAjB,GAAqBL,CAAC,CAACJ,QAAF,CAAWS,CAHf,GAIlBL,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBS,CAJpB;AAKAL,MAAAA,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBU,CAAjB,GAAqBN,CAAC,CAACJ,QAAF,CAAWU,CAAX,GAClBhB,CAAC,CAACc,UAAF,CAAaJ,CAAC,CAACJ,QAAF,CAAWU,CAAxB,IACCN,CAAC,CAACJ,QAAF,CAAWU,CAAX,CAAaN,CAAb,EAAgBR,QAAhB,EAA0BC,IAA1B,CADD,GAECO,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBU,CAAjB,GAAqBN,CAAC,CAACJ,QAAF,CAAWU,CAHf,GAIlBN,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBU,CAJpB;AAKAN,MAAAA,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBW,CAAjB,GAAqBP,CAAC,CAACJ,QAAF,CAAWW,CAAX,GAClBjB,CAAC,CAACc,UAAF,CAAaJ,CAAC,CAACJ,QAAF,CAAWW,CAAxB,IACCP,CAAC,CAACJ,QAAF,CAAWW,CAAX,CAAaP,CAAb,EAAgBR,QAAhB,EAA0BC,IAA1B,CADD,GAECO,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBW,CAAjB,GAAqBP,CAAC,CAACJ,QAAF,CAAWW,CAHf,GAIlBP,CAAC,CAACH,KAAF,CAAQD,QAAR,CAAiBW,CAJpB;AAKA;AACD;;AAED,SAAOf,QAAP;AACA,CA9BD;;AAgCA,eAAeD,QAAf","sourcesContent":["import { all } from \"../utils\";\nimport _ from \"lodash\";\n\nconst Rotation = (entities, args) => {\n\tconst rotatables = all(entities, e => e.rotation, e => e.model);\n\n\tfor (let i = 0; i < rotatables.length; i++) {\n\t\tconst r = rotatables[i];\n\n\t\tif (r.model.cellIndex !== undefined) {\n\t\t\tr.model.angle = _.isFunction(r.rotation)\n\t\t\t\t? r.rotation(r, entities, args)\n\t\t\t\t: r.model.angle + r.rotation;\n\t\t} else {\n\t\t\tr.model.rotation.z = r.rotation.z\n\t\t\t\t? _.isFunction(r.rotation.z)\n\t\t\t\t\t? r.rotation.z(r, entities, args)\n\t\t\t\t\t: r.model.rotation.z + r.rotation.z\n\t\t\t\t: r.model.rotation.z;\n\t\t\tr.model.rotation.x = r.rotation.x\n\t\t\t\t? _.isFunction(r.rotation.x)\n\t\t\t\t\t? r.rotation.x(r, entities, args)\n\t\t\t\t\t: r.model.rotation.x + r.rotation.x\n\t\t\t\t: r.model.rotation.x;\n\t\t\tr.model.rotation.y = r.rotation.y\n\t\t\t\t? _.isFunction(r.rotation.y)\n\t\t\t\t\t? r.rotation.y(r, entities, args)\n\t\t\t\t\t: r.model.rotation.y + r.rotation.y\n\t\t\t\t: r.model.rotation.y;\n\t\t}\n\t}\n\n\treturn entities;\n};\n\nexport default Rotation;\n"]},"metadata":{},"sourceType":"module"}
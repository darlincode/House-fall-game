{"ast":null,"code":"import { all } from \"../utils\";\n\nvar Particles = function Particles(entities, args) {\n  var time = args.time;\n  var entitiesWithParticles = all(entities, function (e) {\n    return e.particles;\n  });\n\n  for (var i = 0; i < entitiesWithParticles.length; i++) {\n    var entity = entitiesWithParticles[i];\n    var keys = Object.keys(entity.particles);\n\n    for (var j = 0; j < keys.length; j++) {\n      var ps = entity.particles[keys[j]];\n      var spawnOptions = ps.spawnOptions,\n          options = ps.options,\n          beforeSpawn = ps.beforeSpawn;\n      var delta = time.delta / 1000 * spawnOptions.timeScale;\n      ps.tick += delta;\n      if (ps.tick < 0) ps.tick = 0;\n\n      if (delta > 0) {\n        beforeSpawn(entity, entities, ps, args);\n\n        for (var x = 0; x < spawnOptions.spawnRate * delta; x++) {\n          ps.emitter.spawnParticle(options);\n        }\n      }\n\n      ps.emitter.update(ps.tick);\n    }\n  }\n\n  return entities;\n};\n\nexport default Particles;","map":{"version":3,"sources":["/home/darlington-chuks/Documents/game-engine/src/game/systems/particles.js"],"names":["all","Particles","entities","args","time","entitiesWithParticles","e","particles","i","length","entity","keys","Object","j","ps","spawnOptions","options","beforeSpawn","delta","timeScale","tick","x","spawnRate","emitter","spawnParticle","update"],"mappings":"AAAA,SAASA,GAAT,QAAoB,UAApB;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAAWC,IAAX,EAAoB;AAAA,MAC7BC,IAD6B,GACpBD,IADoB,CAC7BC,IAD6B;AAErC,MAAMC,qBAAqB,GAAGL,GAAG,CAACE,QAAD,EAAW,UAAAI,CAAC;AAAA,WAAIA,CAAC,CAACC,SAAN;AAAA,GAAZ,CAAjC;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,qBAAqB,CAACI,MAA1C,EAAkDD,CAAC,EAAnD,EAAuD;AACtD,QAAME,MAAM,GAAGL,qBAAqB,CAACG,CAAD,CAApC;AACA,QAAMG,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,MAAM,CAACH,SAAnB,CAAb;;AAEA,SAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACF,MAAzB,EAAiCI,CAAC,EAAlC,EAAsC;AACrC,UAAMC,EAAE,GAAGJ,MAAM,CAACH,SAAP,CAAiBI,IAAI,CAACE,CAAD,CAArB,CAAX;AADqC,UAE7BE,YAF6B,GAEUD,EAFV,CAE7BC,YAF6B;AAAA,UAEfC,OAFe,GAEUF,EAFV,CAEfE,OAFe;AAAA,UAENC,WAFM,GAEUH,EAFV,CAENG,WAFM;AAGrC,UAAMC,KAAK,GAAId,IAAI,CAACc,KAAL,GAAa,IAAd,GAAsBH,YAAY,CAACI,SAAjD;AAEAL,MAAAA,EAAE,CAACM,IAAH,IAAWF,KAAX;AAEA,UAAIJ,EAAE,CAACM,IAAH,GAAU,CAAd,EAAiBN,EAAE,CAACM,IAAH,GAAU,CAAV;;AAEjB,UAAIF,KAAK,GAAG,CAAZ,EAAe;AACdD,QAAAA,WAAW,CAACP,MAAD,EAASR,QAAT,EAAmBY,EAAnB,EAAuBX,IAAvB,CAAX;;AAEA,aAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,YAAY,CAACO,SAAb,GAAyBJ,KAA7C,EAAoDG,CAAC,EAArD,EAAyD;AACxDP,UAAAA,EAAE,CAACS,OAAH,CAAWC,aAAX,CAAyBR,OAAzB;AACA;AACD;;AAEDF,MAAAA,EAAE,CAACS,OAAH,CAAWE,MAAX,CAAkBX,EAAE,CAACM,IAArB;AACA;AACD;;AAED,SAAOlB,QAAP;AACA,CA9BD;;AAgCA,eAAeD,SAAf","sourcesContent":["import { all } from \"../utils\";\n\nconst Particles = (entities, args) => {\n\tconst { time } = args;\n\tconst entitiesWithParticles = all(entities, e => e.particles);\n\n\tfor (let i = 0; i < entitiesWithParticles.length; i++) {\n\t\tconst entity = entitiesWithParticles[i];\n\t\tconst keys = Object.keys(entity.particles);\n\n\t\tfor (let j = 0; j < keys.length; j++) {\n\t\t\tconst ps = entity.particles[keys[j]];\n\t\t\tconst { spawnOptions, options, beforeSpawn } = ps;\n\t\t\tconst delta = (time.delta / 1000) * spawnOptions.timeScale;\n\n\t\t\tps.tick += delta;\n\n\t\t\tif (ps.tick < 0) ps.tick = 0;\n\n\t\t\tif (delta > 0) {\n\t\t\t\tbeforeSpawn(entity, entities, ps, args);\n\n\t\t\t\tfor (let x = 0; x < spawnOptions.spawnRate * delta; x++) {\n\t\t\t\t\tps.emitter.spawnParticle(options);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tps.emitter.update(ps.tick);\n\t\t}\n\t}\n\n\treturn entities;\n};\n\nexport default Particles;\n"]},"metadata":{},"sourceType":"module"}
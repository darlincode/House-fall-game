(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t){var r,n=4,i=.5,o=function(e){return.5*(1-Math.cos(e*Math.PI))};e.exports={noise:function(e,t,a){if(t=t||0,a=a||0,null==r){r=new Array(4096);for(var s=0;s<4096;s++)r[s]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),a<0&&(a=-a);for(var l,c,u,p,d,f=Math.floor(e),h=Math.floor(t),m=Math.floor(a),v=e-f,g=t-h,y=a-m,w=0,b=.5,S=0;S<n;S++){var x=f+(h<<4)+(m<<8);l=o(v),c=o(g),u=r[4095&x],u+=l*(r[x+1&4095]-u),p=r[x+16&4095],u+=c*((p+=l*(r[x+16+1&4095]-p))-u),p=r[4095&(x+=256)],p+=l*(r[x+1&4095]-p),d=r[x+16&4095],p+=c*((d+=l*(r[x+16+1&4095]-d))-p),w+=(u+=o(y)*(p-u))*b,b*=i,f<<=1,h<<=1,m<<=1,(v*=2)>=1&&(f++,v--),(g*=2)>=1&&(h++,g--),(y*=2)>=1&&(m++,y--)}return w},noiseDetail:function(e,t){e>0&&(n=e),t>0&&(i=t)},noiseSeed:function(e){var t=function(){var e,t,r=4294967296;return{setSeed:function(n){t=e=(null==n?Math.random()*r:n)>>>0},getSeed:function(){return e},rand:function(){return(t=(1664525*t+1013904223)%r)/r}}}();t.setSeed(e),r=new Array(4096);for(var n=0;n<4096;n++)r[n]=t.rand()}}},,,function(e,t,r){},,,,function(e,t,r){e.exports=r.p+"static/media/crash-01.8bb8f478.wav"},function(e,t,r){e.exports=r.p+"static/media/cuphead.de89fa67.png"},function(e,t,r){"use strict";(function(e){var n=r(22),i=r.n(n),o=r(30);e.Zlib=i.a.Zlib,t.a=o.a}).call(this,r(14))},,function(e,t,r){e.exports=r.p+"static/media/droid.096ec86b.fbx"},function(e,t,r){e.exports=r.p+"static/media/perlin.0a023299.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REVGODRBRjIyRjU2MTFFNUExM0Y4OUExMTc4QTBCQUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REVGODRBRjMyRjU2MTFFNUExM0Y4OUExMTc4QTBCQUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERUY4NEFGMDJGNTYxMUU1QTEzRjg5QTExNzhBMEJBQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERUY4NEFGMTJGNTYxMUU1QTEzRjg5QTExNzhBMEJBQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgDz1z0AAAZeSURBVHja7FuLjuMoEASMnfz/167N67SSkepK1fgxyVxOM5YQzkxiu4vqorvBvrXmfvIR3A8/fgH4BeCHH/Gb7uOp4d/70egc2/8SgG5sMM79bpw3DK/G+ccD0A1VzYPbeYMB3dCyfy47ABXAqJ8IQDduMnpPQDhiAjOgGz7RZ+zbpwAQ9muh0ZMAIZArIHgNRrZSK9AC9eW/BqAbzr0CYSIdcMIF2HAG4G9Le9+vc5sN8YuUj2S4+tzPOwjeYEEjH1eG5934sJ9nuMYtbYgvoPxMxs8GGJMAQWmAGvlubGdRFuLav1ffDUAwDP7bL+JvigXBmAUqCB5TPgMD1DV6fwmEeIP2E418N3wW5zMxQemAJwCQ/t3oeTe8G78duJI7C0K86fPK4Ad8XgQrlBtgKF7JBdDnM7GImaSOU4HTFQAm4eMLtQecMxs6a5QOqKkv0ejHfeTx9yqIQjDzqwBA+jIL0PgHgPAwdEG5QROjX4D2m4glLNpz6Fy+CoAX09wMtO/GPg0QFtKLyaAvA5Bg9HkmYfFrYirl/jYAQYz+TCA8oX8KRihBDKQBTYz+Bt9fTwonfo5HYhgvqL4y3nIBBqMDxTNCB7gRABkYsAr6q8wRp9D+vP28WoIYT4w+NvTlxTD+Ce1BIKAgokGNRrEL4CZcpgnj+8h30UQGYN5wCQDM7iK1xRDCpwHCg0CIBgAsfkov2PhMzCkwbQZgwC0AJiPDi0YcsAyYwFowgQYgA7JQfncQLGHQlPfrc+g8KRDiAf09BR7TIAQe6cCTpkZWdJy3s/i/E25SgPLsLioTvcQAruqoCytBVGCwFixCCB35f6Jgh0d8AZGcd+MxYJqMuMGzGJ7RAIsF02CGWEQ88BBxAWtANmjfiCEJQIgAAhuuSnKnAOBCZhAXjiIp4vjfco0FAHBQ+8uGNhQa8UWM9jQYfasIc4oBfCG8QRQsUMAwK3A69DB/ZzAefX0WAmoVW9Rg+asAeNGCcIkgCqD8cJZGKAACjTqKokqpw8BgVXx1VwFwongZDgCaRJE0DqJJD/6PIz8ZBlvn3sgTrIWYS9mgAiQYrHDGYgizZIb0uIDx/D1vGMjGWRUibxl/NhdQCHIW58V6ox8Ag/0MIujpewy4M1g5eh4/AuHM4mg7WMPzRimKU1IrXU2UzDiRvLTBfdVzWZWhdoUBTZSr2sEa3shQVeltIHyYCvNvOAQ+um8bDNgpAJqBnlVssOr4FZS8QE0/QKUJZ4EELRvXO2rOAOhSOtwM1Jtx02K0LMrZHpRfxQEIQCIAswCkDICoRwXSMwywFiy4Z2OTKGZy5KciwZ4JrnSdRPc4A4haZj+tAZVWZa1RT/RA/NBc/uq/5VyAS2Er9UkskCgg1LOabjBiQDVq9UzvAumoSkw8pb0FortAFM1UCf4DAGCzgFCa0e6UxNQ6fT2ge9z7lSI4L/w80/+cKIchAxQQHaQsWj0LwpELFCgmjAzfoLdqeGXPAZQgqopQB1M1C4RiaEOxqsNHcYBVhcERtxIULwQ009qAYkAWYogsWEkXsnCLLJjb7gBQqKaGfTIqRdZqTxW/sxhQwKj1AITNmCmKEMHLuUAVIISD7S/OACAb9UAvFkYyjOyIBasAIBmCeGthBA0IULBIJwoOXOfHGkCk1eFm1AESCZ/FAOUCmUTw9tJYgYfNRp1NbXUpoogZDQa0gRBmMvZIFIsA4UuLozh9jXJzNfKFGMCu44QLNDJgo1kBg6M/9P+N4oJ6tEfgbEGkun/vylI5ttroiCWtRPSfxGoP7w8owrhVgDHSgJdtkEBXSO54kxPOxRF0Iw62tlQxGyTSg2REhhtpx6n9g1cAaFS18caoq5Ubq6DJ11HukwmEJJR/E37fXg2Ao+KlGxRIiliji5QbjPYJWnlHEukyn1/aNHlnm1yFao4Svgh9hAUNruQ6EQdYkae1XS6JjPTt+wQd3aQZDz+LkNmq26s9PtVY/s6DusC37RR1Is/GpGOiCDKI8JervFaZrRp5fxZ1RPedADiYs3Fbe3X3d4u3wb4fq974pXcHXrVdHtkQKHwOA/ELQkuUKxQDkI95XwDZ0Cs/1jqiWqywNjo2I639yDdGFBCj94XwnaE2ENWXvybzbgA4cHLu3FtjXL6u7s1vjL0bADdY2vqY4/fN0V8AfvjxjwADALR8rODQS303AAAAAElFTkSuQmCC"},,function(e,t,r){e.exports=r.p+"static/media/jet.b9ea13bd.glb"},,,,function(e,t,r){e.exports=r(39)},,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),o=r(17),a=r.n(o),s=r(7),l=r(8),c=r(10),u=r(9),p=r(5),d=r(18),f=r(29),h=r(0),m={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},v=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(v.prototype,{setSize:function(e,t){},render:function(e,t,r,n,i){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),v.FullScreenQuad=function(){var e=new h.gb(-1,1,1,-1,0,1),t=new h.ib(2,2),r=function(e){this._mesh=new h.V(t,e)};return Object.defineProperty(r.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(r.prototype,{render:function(t){t.render(this._mesh,e)}}),r}();var g=v,y=function(e,t){g.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof h.yb?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=h.Kb.clone(e.uniforms),this.material=new h.yb({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new h.gb(-1,1,1,-1,0,1),this.scene=new h.wb,this.quad=new h.V(new h.ib(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};y.prototype=Object.assign(Object.create(g.prototype),{constructor:y,render:function(e,t,r,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera))}});var w=y,b=function(e,t){g.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};b.prototype=Object.assign(Object.create(g.prototype),{constructor:b,render:function(e,t,r,n,i){var o,a,s=e.context,l=e.state;l.buffers.color.setMask(!1),l.buffers.depth.setMask(!1),l.buffers.color.setLocked(!0),l.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),l.buffers.stencil.setTest(!0),l.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),l.buffers.stencil.setFunc(s.ALWAYS,o,4294967295),l.buffers.stencil.setClear(a),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),l.buffers.color.setLocked(!1),l.buffers.depth.setLocked(!1),l.buffers.stencil.setFunc(s.EQUAL,1,4294967295),l.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}});var S=b,x=function(){g.call(this),this.needsSwap=!1};x.prototype=Object.create(g.prototype),Object.assign(x.prototype,{render:function(e,t,r,n,i){e.state.buffers.stencil.setTest(!1)}});var T=x,R=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:h.K,magFilter:h.K,format:h.pb,stencilBuffer:!1},n=new h.Pb;e.getDrawingBufferSize(n),(t=new h.Ub(n.width,n.height,r)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===m&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===w&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new w(m)};Object.assign(R.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=new h.Pb;this.renderer.getDrawingBufferSize(t),e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,r,n=!1,i=this.passes.length;for(r=0;r<i;r++)if(!1!==(t=this.passes[r]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==S&&(t instanceof S?n=!0:t instanceof T&&(n=!1))}},reset:function(e){if(void 0===e){var t=new h.Pb;this.renderer.getDrawingBufferSize(t),(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(e,t)}});var A=R,M=function(e,t,r,n,i){g.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};M.prototype=Object.assign(Object.create(g.prototype),{constructor:M,render:function(e,t,r,n,i){var o,a,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(o=e.getClearColor().getHex(),a=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(o,a),this.scene.overrideMaterial=null,e.autoClear=s}});var E=M,C=r(2),L=r.n(C);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(p.a)(e);if(t){var i=Object(p.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var O=function(e){Object(c.a)(r,e);var t=I(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onResize=function(){var t=e.refs.container,r=t.clientWidth,n=t.clientHeight,i=window.devicePixelRatio;e.props.camera.resize(r,n,i),e.renderer.setPixelRatio(i),e.renderer.setSize(r,n)},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.refs.container,r=t.clientWidth,n=t.clientHeight,i=window.devicePixelRatio;this.props.camera.resize(r,n,i),this.renderer=new h.Vb({}),this.renderer.setPixelRatio(i),this.renderer.setSize(r,n),this.renderer.setClearColor(131586,1),this.composer=new A(this.renderer);var o=[new E(this.props.scene,this.props.camera)].concat(Object(f.a)(this.props.passes));o.forEach(function(t){return e.composer.addPass(t)}),o[o.length-1].renderToScreen=!0,window.addEventListener("resize",this.onResize),t.appendChild(this.renderer.domElement)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.refs.container.removeChild(this.renderer.domElement)}},{key:"render",value:function(){return this.composer&&this.composer.render(),i.a.createElement("div",{ref:"container",style:P.container})}}]),r}(n.PureComponent),P={container:{height:"100vh",width:"100vw",overflow:"hidden"}},D=function(e,t){if(!e.hud)return null;var r=e.hud;return"object"===typeof r.renderer?i.a.createElement(r.renderer.type,Object.assign({key:"hud"},r,{window:t})):"function"===typeof r.renderer?i.a.createElement(r.renderer,Object.assign({key:"hud"},r,{window:t})):void 0},U=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){return e?[i.a.createElement(O,{passes:L.a.flatten(t),key:"threeView",scene:e.scene,camera:e.camera}),D(e,r)]:null}},F={retarget:function(){var e=new h.Qb,t=new h.nb,r=new h.Qb,n=new h.U,i=new h.U,o=new h.U;return function(a,s,l){(l=l||{}).preserveMatrix=void 0===l.preserveMatrix||l.preserveMatrix,l.preservePosition=void 0===l.preservePosition||l.preservePosition,l.preserveHipPosition=void 0!==l.preserveHipPosition&&l.preserveHipPosition,l.useTargetMatrix=void 0!==l.useTargetMatrix&&l.useTargetMatrix,l.hip=void 0!==l.hip?l.hip:"hip",l.names=l.names||{};var c,u,p,d,f,h,m=s.isObject3D?s.skeleton.bones:this.getBones(s),v=a.isObject3D?a.skeleton.bones:this.getBones(a);if(a.isObject3D?a.skeleton.pose():(l.useTargetMatrix=!0,l.preserveMatrix=!1),l.preservePosition)for(f=[],h=0;h<v.length;h++)f.push(v[h].position.clone());if(l.preserveMatrix)for(a.updateMatrixWorld(),a.matrixWorld.identity(),h=0;h<a.children.length;++h)a.children[h].updateMatrixWorld(!0);if(l.offsets)for(c=[],h=0;h<v.length;++h)u=v[h],p=l.names[u.name]||u.name,l.offsets&&l.offsets[p]&&(u.matrix.multiply(l.offsets[p]),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()),c.push(u.matrixWorld.clone());for(h=0;h<v.length;++h){if(u=v[h],p=l.names[u.name]||u.name,d=this.getBoneByName(p,m),o.copy(u.matrixWorld),d){if(d.updateMatrixWorld(),l.useTargetMatrix?i.copy(d.matrixWorld):(i.getInverse(a.matrixWorld),i.multiply(d.matrixWorld)),r.setFromMatrixScale(i),i.scale(r.set(1/r.x,1/r.y,1/r.z)),o.makeRotationFromQuaternion(t.setFromRotationMatrix(i)),a.isObject3D){var g=v.indexOf(u),y=c?c[g]:n.getInverse(a.skeleton.boneInverses[g]);o.multiply(y)}o.copyPosition(i)}u.parent&&u.parent.isBone?(u.matrix.getInverse(u.parent.matrixWorld),u.matrix.multiply(o)):u.matrix.copy(o),l.preserveHipPosition&&p===l.hip&&u.matrix.setPosition(e.set(0,u.position.y,0)),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()}if(l.preservePosition)for(h=0;h<v.length;++h)u=v[h],(p=l.names[u.name]||u.name)!==l.hip&&u.position.copy(f[h]);l.preserveMatrix&&a.updateMatrixWorld(!0)}}(),retargetClip:function(e,t,r,n){(n=n||{}).useFirstFramePosition=void 0!==n.useFirstFramePosition&&n.useFirstFramePosition,n.fps=void 0!==n.fps?n.fps:30,n.names=n.names||[],t.isObject3D||(t=this.getHelperFromSkeleton(t));var i,o,a,s,l,c,u=Math.round(r.duration*(n.fps/1e3)*1e3),p=1/n.fps,d=[],f=new h.e(t),m=this.getBones(e.skeleton),v=[];for(f.clipAction(r).play(),f.update(0),t.updateMatrixWorld(),l=0;l<u;++l){var g=l*p;for(this.retarget(e,t,n),c=0;c<m.length;++c)s=n.names[m[c].name]||m[c].name,this.getBoneByName(s,t.skeleton)&&(o=m[c],a=v[c]=v[c]||{bone:o},n.hip===s&&(a.pos||(a.pos={times:new Float32Array(u),values:new Float32Array(3*u)}),n.useFirstFramePosition&&(0===l&&(i=o.position.clone()),o.position.sub(i)),a.pos.times[l]=g,o.position.toArray(a.pos.values,3*l)),a.quat||(a.quat={times:new Float32Array(u),values:new Float32Array(4*u)}),a.quat.times[l]=g,o.quaternion.toArray(a.quat.values,4*l));f.update(p),t.updateMatrixWorld()}for(l=0;l<v.length;++l)(a=v[l])&&(a.pos&&d.push(new h.Sb(".bones["+a.bone.name+"].position",a.pos.times,a.pos.values)),d.push(new h.ob(".bones["+a.bone.name+"].quaternion",a.quat.times,a.quat.values)));return f.uncacheAction(r),new h.d(r.name,-1,d)},getHelperFromSkeleton:function(e){var t=new h.Ab(e.bones[0]);return t.skeleton=e,t},getSkeletonOffsets:function(){var e=new h.Qb,t=new h.Qb,r=new h.Qb,n=new h.Qb,i=new h.Pb,o=new h.Pb;return function(a,s,l){(l=l||{}).hip=void 0!==l.hip?l.hip:"hip",l.names=l.names||{},s.isObject3D||(s=this.getHelperFromSkeleton(s));var c,u,p,d,f=Object.keys(l.names),m=Object.values(l.names),v=s.isObject3D?s.skeleton.bones:this.getBones(s),g=a.isObject3D?a.skeleton.bones:this.getBones(a),y=[];for(a.skeleton.pose(),d=0;d<g.length;++d)if(c=g[d],p=l.names[c.name]||c.name,(u=this.getBoneByName(p,v))&&p!==l.hip){var w=this.getNearestBone(c.parent,f),b=this.getNearestBone(u.parent,m);w.updateMatrixWorld(),b.updateMatrixWorld(),e.setFromMatrixPosition(w.matrixWorld),t.setFromMatrixPosition(c.matrixWorld),r.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(u.matrixWorld),i.subVectors(new h.Pb(t.x,t.y),new h.Pb(e.x,e.y)).normalize(),o.subVectors(new h.Pb(n.x,n.y),new h.Pb(r.x,r.y)).normalize();var S=i.angle()-o.angle(),x=(new h.U).makeRotationFromEuler(new h.u(0,0,S));c.matrix.multiply(x),c.matrix.decompose(c.position,c.quaternion,c.scale),c.updateMatrixWorld(),y[p]=x}return y}}(),renameBones:function(e,t){for(var r=this.getBones(e),n=0;n<r.length;++n){var i=r[n];t[i.name]&&(i.name=t[i.name])}return this},getBones:function(e){return Array.isArray(e)?e:e.bones},getBoneByName:function(e,t){for(var r=0,n=this.getBones(t);r<n.length;r++)if(e===n[r].name)return n[r]},getNearestBone:function(e,t){for(;e.isBone;){if(-1!==t.indexOf(e.name))return e;e=e.parent}},findBoneTrackData:function(e,t){for(var r=/\[(.*)\]\.(.*)/,n={name:e},i=0;i<t.length;++i){var o=r.exec(t[i].name);o&&e===o[1]&&(n[o[2]]=i)}return n},getEqualsBonesNames:function(e,t){var r=this.getBones(e),n=this.getBones(t),i=[];e:for(var o=0;o<r.length;o++)for(var a=r[o].name,s=0;s<n.length;s++)if(a===n[s].name){i.push(a);continue e}return i},clone:function(e){var t=new Map,r=new Map,n=e.clone();return function e(t,r,n){n(t,r);for(var i=0;i<t.children.length;i++)e(t.children[i],r.children[i],n)}(e,n,function(e,n){t.set(n,e),r.set(e,n)}),n.traverse(function(e){if(e.isSkinnedMesh){var n=e,i=t.get(e),o=i.skeleton.bones;n.skeleton=i.skeleton.clone(),n.bindMatrix.copy(i.bindMatrix),n.skeleton.bones=o.map(function(e){return r.get(e)}),n.bind(n.skeleton,n.bindMatrix)}}),n}};var _=function e(t){for(;t.children.length>0;)e(t.children[0]),t.remove(t.children[0]);t.geometry&&t.geometry.dispose&&t.geometry.dispose(),t.material&&t.material.dispose&&t.material.dispose(),t.texture&&t.texture.dispose&&t.texture.dispose()},G=_,j=function(e,t){t&&_(t),e&&e.remove(t)},k=function(e,t,r){var n=r.x,i=void 0===n?0:n,o=r.y,a=void 0===o?0:o,s=r.z,l=void 0===s?0:s,c=e.position.clone(),u=t.clone(),p=(new h.Qb).subVectors(c,u);e.position.copy(u),e.rotation.x+=i,e.rotation.y+=a,e.rotation.z+=l,p.applyAxisAngle(new h.Qb(1,0,0),i),p.applyAxisAngle(new h.Qb(0,1,0),a),p.applyAxisAngle(new h.Qb(0,0,1),l),e.position.add(p)},N=function(e){return e.model?e.model:e},B=function(e,t){if(e&&t){var r=e.model?e.model:e,n=t.model?t.model:t;N(r).add(N(n))}},z=function(e){return e.clone()},H=F.clone,W=function(e,t){return{originalLoader:e,load:function(r){return new Promise(function(n,i){e.load(r,n,t,i)})}}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.yawSpeed,r=void 0===t?.01:t,n=e.pitchSpeed,i=void 0===n?.01:n,o=e.zoomSpeed,a=void 0===o?.02:o;return function(e,t){var n=t.keyboardController,o=e.camera;if(o&&n){var s=n.w,l=n.a,c=n.s,u=n.d,p=n.space,d=n.control;if((s||l||c||u)&&(k(o,o.target,{y:(l?1:u?-1:0)*r,x:(s?1:c?-1:0)*i}),o.lookAt(o.target)),p||d){var f=(p?1:d?-1:0)*a;o.zoom+=f,o.updateProjectionMatrix()}}return e}},V=(r(16),function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(e)return!r||r.length<1?e:Array.isArray(e)?e.filter(function(e){return L.a.every(r,function(t){return t(e)})}):Object.keys(e).filter(function(t){return L.a.every(r,function(r){return r(e[t])})}).map(function(t){return e[t]})}),K=function(e,t,r,n,i){return(e-t)/(r-t)*(i-n)+n},Y=function(e,t,r){return e>t&&e<r},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(t).concat(++e)}},X=(window.screen,L.a.find,L.a.filter,function(e,t,r){return Math.max(Math.min(e,r),t)}),J=(L.a.once,L.a.memoize,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new Audio(e),n=function(){return r.play()};return t?function(e,t,r){var n=0;return function(){var i=performance.now();return i-n>t?(n=i,e.apply(void 0,arguments)):L.a.isFunction(r)?r.apply(void 0,arguments):r}}(n,t):n}),q=function(e,t){for(var r=t.time,n=V(e,function(e){return e.particles}),i=0;i<n.length;i++)for(var o=n[i],a=Object.keys(o.particles),s=0;s<a.length;s++){var l=o.particles[a[s]],c=l.spawnOptions,u=l.options,p=l.beforeSpawn,d=r.delta/1e3*c.timeScale;if(l.tick+=d,l.tick<0&&(l.tick=0),d>0){p(o,e,l,t);for(var f=0;f<c.spawnRate*d;f++)l.emitter.spawnParticle(u)}l.emitter.update(l.tick)}return e},$=new h.y,ee=new h.U,te=function(e){var t=e.camera,r=Object.keys(e).filter(function(t){return e[t].removable});return t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),$.setFromMatrix(ee),r.forEach(function(t){var r=e[t].removable;L.a.isFunction(r)&&!r($,e[t],e)||function(e,t){var r=e[t];r&&(r.model&&j(r.model.parent,r.model),r.light&&j(r.light.parent,r.light),r.particles&&Object.keys(r.particles).forEach(function(e){var t=r.particles[e].emitter;t&&j(t.parent,t)}),r.bodies&&r.bodies.forEach(function(e){return e.remove()}),delete e[t])}(e,t)}),e},re=function(e,t){for(var r=V(e,function(e){return e.rotation},function(e){return e.model}),n=0;n<r.length;n++){var i=r[n];void 0!==i.model.cellIndex?i.model.angle=L.a.isFunction(i.rotation)?i.rotation(i,e,t):i.model.angle+i.rotation:(i.model.rotation.z=i.rotation.z?L.a.isFunction(i.rotation.z)?i.rotation.z(i,e,t):i.model.rotation.z+i.rotation.z:i.model.rotation.z,i.model.rotation.x=i.rotation.x?L.a.isFunction(i.rotation.x)?i.rotation.x(i,e,t):i.model.rotation.x+i.rotation.x:i.model.rotation.x,i.model.rotation.y=i.rotation.y?L.a.isFunction(i.rotation.y)?i.rotation.y(i,e,t):i.model.rotation.y+i.rotation.y:i.model.rotation.y)}return e},ne=function(e,t){e.start||(e.start=t.time.current)},ie=function(e,t,r,n,i){var o=i.time;if(n.duration){var a=(o.current-n.start)/n.duration;a<=1?n.update(e,t,a,n,i):(n.complete&&n.complete(e,t,n,i),delete e.timelines[r])}n.while&&(!L.a.isFunction(n.while)||n.while(e,t,n,i)?n.update(e,t,n,i):(n.complete&&n.complete(e,t,n,i),delete e.timelines[r]))},oe=function(e,t){for(var r=V(e,function(e){return e.timelines}),n=0;n<r.length;n++)for(var i=r[n],o=Object.keys(i.timelines),a=0;a<o.length;a++){var s=o[a],l=i.timelines[s];l&&(ne(l,t),ie(i,e,s,l,t))}return e},ae=function(e,t){var r=e.hud;return r&&(r.gamepadController=t.gamepadController,r.keyboardController=t.keyboardController,r.mouseController=t.mouseController),e},se=r(11),le=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05);return function(r){if(r)return e.map(function(e){var n=r.axes[e];return Math.abs(n)>t?n:0})}}([e,t]);return function(e){var t=r(e)||[0,0],n=Object(se.a)(t,2),i=n[0],o=n[1];return{x:i,y:o,heading:i+o?Math.atan2(o,i):null}}},ce=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){if(t)return e.map(function(e){return t.buttons[e].pressed})}}([e]);return function(e){var r=t(e)||[!1];return Object(se.a)(r,1)[0]}},ue=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;return function(r){if(r)return e.map(function(e){var n=r.buttons[e];return n.pressed&&n.value>t?n.value:0})}}([e]);return function(e){var r=t(e)||[0];return Object(se.a)(r,1)[0]}},pe=le(0,1),de=le(2,3),fe=ce(0),he=ce(1),me=ue(6),ve=ue(7),ge={},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,r){if(!r.gamepadController){var n=navigator.getGamepads()[0]||navigator.getGamepads()[1]||navigator.getGamepads()[2]||navigator.getGamepads()[3],i={leftStick:pe(n),rightStick:de(n),button0:fe(n),button1:he(n),leftTrigger:me(n),rightTrigger:ve(n),vibrate:(o=n,function(e){o&&o.vibrationActuator&&o.vibrationActuator.playEffect("dual-rumble",e)})};r.gamepadController=Object.assign({},i,{previous:ge}),ge=i}var o;return e(t,r)}},we=function(e,t,r){return e.find(function(e){return e.name===r&&-1!==t.indexOf(e.payload.key)})},be=function(e){var t=!1;return function(r){return we(r,e,"onKeyDown")&&(t=!0),we(r,e,"onKeyUp")&&(t=!1),t}},Se=be(["w","W","ArrowUp"]),xe=be(["a","A","ArrowLeft"]),Te=be(["s","S","ArrowDown"]),Re=be(["d","D","ArrowRight"]),Ae=be([" "]),Me=be(["Control"]),Ee={},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,r){if(!r.keyboardController){var n=r.input,i={w:Se(n),a:xe(n),s:Te(n),d:Re(n),space:Ae(n),control:Me(n)};r.keyboardController=Object.assign({},i,{previous:Ee}),Ee=i}return e(t,r)}},Le=function(e,t,r){return e.find(function(e){return e.name===r&&-1!==t.indexOf(e.payload.button)})},Ie=function(e){var t=!1;return function(r){return Le(r,e,"onMouseDown")&&(t=!0),Le(r,e,"onMouseUp")&&(t=!1),t}},Oe=Ie([0]),Pe=Ie([1]),De=Ie([2]),Ue=function(){var e={x:0,y:0};return function(t){var r=t.find(function(e){return"onMouseMove"===e.name});return r&&(e={x:r.payload.pageX,y:r.payload.pageY}),e}}(),Fe=function(){var e=0;return function(t){var r=t.find(function(e){return"onWheel"===e.name});return r&&(r.payload.deltaY<0?e--:e++),e}}(),_e={},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,r){if(!r.mouseController){var n=r.input,i={left:Oe(n),middle:Pe(n),right:De(n),position:Ue(n),wheel:Fe(n)};r.mouseController=Object.assign({},i,{previous:_e}),_e=i}return e(t,r)}},je=function(e,t){var r=e.world,n=V(e,function(e){return e.bodies&&e.model});r&&r.step();for(var i=0;i<n.length;i++){var o=n[i],a=o.model,s=o.bodies[0],l=o.collision;if(s.sleeping||(a.position.copy(s.getPosition()),a.quaternion.copy(s.getQuaternion())),l)for(var c=0;c<n.length;c++)if(i!==c){var u=n[c],p=u.bodies[0],d=r.getContact(s,p);d&&l(o,u,d,e,t)}}return e},ke=r(19),Ne=r.n(ke),Be=function(e){return function(){return e("box")}}(Z(0)),ze=function(e){return function(){return e("cylinder")}}(Z(0)),He=function(e,t){var r=t.gamepadController,n=t.mouseController,i=e.world,o=e.scene;return(r.button0&&!r.previous.button0||n.left&&!n.previous.left)&&(e[Be()]=function(e){var t=e.parent,r=e.world,n=e.dynamic,i=void 0===n||n,o=e.x,a=void 0===o?0:o,s=e.y,l=void 0===s?0:s,c=e.z,u=void 0===c?0:c,p=e.width,d=void 0===p?1.1:p,f=e.breadth,m=void 0===f?1.1:f,v=e.height,g=void 0===v?1.1:v,y=e.scale,w=void 0===y?1:y,b=e.color,S=void 0===b?59135:b,x=new h.i(d,g,m),T=new h.Z({color:S}),R=new h.V(x,T);R.position.x=a,R.position.y=l,R.position.z=u,R.scale.x=w,R.scale.y=w,R.scale.z=w,B(t,R);var A=J(Ne.a,640);return{model:R,bodies:[r.add({type:"box",size:[d*w,g*w,m*w],pos:[a,l,u],rot:[0,0,0],move:i,density:.1,friction:.9,restitution:.2,belongsTo:1,collidesWith:4294967295})],collision:function(e,t,r,n,i){var o=i.gamepadController;if(!r.close){A();var a=n.camera;a&&a.shake(),o&&o.vibrate({duration:300,strongMagnitude:.3})}},removable:function(e,t){return!e.intersectsObject(t.model)}}}({parent:o,world:i,y:5})),(r.button1&&!r.previous.button1||n.right&&!n.previous.right)&&(e[ze()]=function(e){var t=e.parent,r=e.world,n=e.dynamic,i=void 0===n||n,o=e.x,a=void 0===o?0:o,s=e.y,l=void 0===s?0:s,c=e.z,u=void 0===c?0:c,p=e.radius,d=void 0===p?.5:p,f=e.height,m=void 0===f?1.1:f,v=e.segments,g=void 0===v?32:v,y=e.scale,w=void 0===y?1:y,b=e.color,S=void 0===b?1041951:b,x=e.opacity,T=void 0===x?1:x,R=new h.p(d,d,m,g),A=new h.Z({color:S,transparent:T<1,opacity:T,flatShading:!0}),M=new h.V(R,A);return M.position.x=a,M.position.y=l,M.position.z=u,M.scale.x=w,M.scale.y=w,M.scale.z=w,B(t,M),{model:M,bodies:[r.add({type:"cylinder",size:[d*w,m*w],pos:[a,l,u],rot:[0,0,0],move:i,density:.1,friction:.9,restitution:.2,belongsTo:1,collidesWith:4294967295})],removable:function(e,t){return!e.intersectsObject(t.model)}}}({parent:o,world:i,y:5})),e},We=[ye(),Ce(),Ge(),Q({pitchSpeed:-.02,yawSpeed:.02}),q,te,re,oe,He,je,ae],Qe=r(3),Ve=r.n(Qe),Ke=r(4),Ye=r(12),Ze=function(){var e=Object(Ke.a)(Ve.a.mark(function e(t){var r,n,i,o,a,s,l,c,u,p,d,f,m,v,g,y,w;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parent,n=t.x,i=void 0===n?0:n,o=t.z,a=void 0===o?0:o,s=t.y,l=void 0===s?0:s,c=t.spriteSheet,u=t.rows,p=t.columns,d=t.actions,f=void 0===d?{}:d,e.t0=z,e.next=4,Promise.resolve(c);case 4:return e.t1=e.sent,(m=(0,e.t0)(e.t1)).needsUpdate=!0,m.repeat.set(1/p,1/u),v=new h.Eb({map:m,color:16777215}),(g=new h.Db(v)).position.x=i,g.position.y=l,g.position.z=a,B(r,g),y={},w={},Object.keys(f).forEach(function(e){y[e]=function(){if(!w.action||w.action.key!==e){var t=f[e],r=t.start,n=t.end,i=t.loop,o=void 0===i||i,a=t.speed,s=void 0===a?.25:a,l=t.update,c=t.scaleX,d=void 0===c?1:c,h=t.scaleY,v=void 0===h?1:h,y=t.flipX,b=void 0!==y&&y,S=t.flipY,x=void 0!==S&&S;n=n||r,g.scale.x=d,g.scale.y=v,m.repeat.x=Math.abs(m.repeat.x)*(b?-1:1),m.repeat.y=Math.abs(m.repeat.y)*(x?-1:1);var T=r.column,R=r.row,A=n.column,M=n.row;b&&(T++,A++),x&&(R++,M++);var E=1*s/Math.max(Math.abs(A-T),Math.abs(M-R),1);o&&(A++,M++),w.action={while:!0,counter:0,key:e,update:function(e,t,r,n){var i=o?r.counter%1:X(r.counter,0,1),a=Math.trunc(K(i,0,1,T,A)),s=Math.trunc(K(i,0,1,R,M));m.offset.x=a/p,m.offset.y=s/u,r.counter+=E,l&&l(e,t,{column:a,row:s},n)}}}}}),e.abrupt("return",{model:g,actions:y,timelines:w});case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Xe=r(20),Je=r.n(Xe),qe=W(new h.Gb).load(Je.a),$e=function(){var e=Object(Ke.a)(Ve.a.mark(function e(t){var r,n,i,o,a,s,l,c;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parent,n=t.x,i=void 0===n?0:n,o=t.y,a=void 0===o?0:o,s=t.z,l=void 0===s?0:s,e.next=3,Ze({parent:r,x:i,y:a,z:l,spriteSheet:qe,columns:16,rows:8,actions:{idle:{start:{row:2,column:0}},jump:{start:{row:0,column:0},end:{row:0,column:9},loop:!1},s:{start:{row:1,column:0},end:{row:1,column:12}},se:{start:{row:3,column:0},end:{row:3,column:15}},e:{start:{row:4,column:0},end:{row:4,column:13}},ne:{start:{row:6,column:0},end:{row:6,column:14}},n:{start:{row:7,column:1},end:{row:7,column:15}},nw:{start:{row:6,column:0},end:{row:6,column:14},flipX:!0},w:{start:{row:4,column:0},end:{row:4,column:13},flipX:!0},sw:{start:{row:3,column:0},end:{row:3,column:15},flipX:!0}}});case 3:return(c=e.sent).timelines.controls={while:!0,directions:[{heading:0,action:"e"},{heading:-45,action:"ne"},{heading:-90,action:"n"},{heading:-135,action:"nw"},{heading:-180,action:"w"},{heading:45,action:"se"},{heading:90,action:"s"},{heading:135,action:"sw"},{heading:180,action:"w"}],update:function(e,t,r,n){var i=r.directions,o=n.gamepadController;if(null!==o.leftStick.heading){var a=h.S.radToDeg(o.leftStick.heading),s=i.find(function(e){return Y(a,e.heading-25,e.heading+25)});e.actions[s.action]()}else e.actions.idle()}},e.abrupt("return",c);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function et(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(p.a)(e);if(t){var i=Object(p.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var tt=function(e){Object(c.a)(r,e);var t=et(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.keyboardController||{},r=e.keyboardController||{},n=this.props.gamepadController||{},i=e.gamepadController||{},o=this.props.mouseController||{},a=e.mouseController||{};return t.w!==r.w||t.a!==r.a||t.s!==r.s||t.d!==r.d||t.space!==r.space||t.control!==r.control||n.leftTrigger!==i.leftTrigger||n.rightTrigger!==i.rightTrigger||n.leftStick.x!==i.leftStick.x||n.leftStick.y!==i.leftStick.y||n.rightStick.x!==i.rightStick.x||n.rightStick.y!==i.rightStick.y||n.button0!==i.button0||n.button1!==i.button1||o.wheel!==a.wheel||o.left!==a.left||o.right!==a.right||o.middle!==a.middle||o.position.x!==a.position.x||o.position.y!==a.position.y}},{key:"render",value:function(){var e=this.props.keyboardController||{},t=e.w,r=e.a,n=e.s,o=e.d,a=e.space,s=e.control,l=this.props.gamepadController||{},c=l.button0,u=l.button1,p=l.leftTrigger,d=void 0===p?0:p,f=l.rightTrigger,h=void 0===f?0:f,m=l.leftStick,v=void 0===m?{x:0,y:0}:m,g=l.rightStick,y=void 0===g?{x:0,y:0}:g,w=this.props.mouseController||{},b=w.wheel,S=w.left,x=w.middle,T=w.right,R=w.position,A=void 0===R?{x:0,y:0}:R,M="cornflowerblue";return i.a.createElement("div",{style:rt.hud},i.a.createElement("h1",null,i.a.createElement("span",{style:{color:c?M:"white"}},"B0"),"\xa0\xa0",i.a.createElement("span",{style:{color:u?M:"white"}},"B1"),"\xa0\xa0",i.a.createElement("span",{style:{color:v.heading?M:"white"}},"LS(".concat(v.x.toFixed(2),", ").concat(v.y.toFixed(2),")")),"\xa0\xa0",i.a.createElement("span",{style:{color:d?M:"white"}},"LT(".concat(d.toFixed(2),")")),"\xa0\xa0",i.a.createElement("span",{style:{color:y.heading?M:"white"}},"RS(".concat(y.x.toFixed(2),", ").concat(y.y.toFixed(2),")")),"\xa0\xa0",i.a.createElement("span",{style:{color:h?M:"white"}},"RT(".concat(h.toFixed(2),")")),"\xa0\xa0",i.a.createElement("span",{style:{color:t?M:"white"}},"W"),i.a.createElement("span",{style:{color:r?M:"white"}},"A"),i.a.createElement("span",{style:{color:n?M:"white"}},"S"),i.a.createElement("span",{style:{color:o?M:"white"}},"D"),"\xa0\xa0",i.a.createElement("span",{style:{color:a?M:"white"}},"SPACE"),"\xa0\xa0",i.a.createElement("span",{style:{color:s?M:"white"}},"CONTROL"),"\xa0\xa0",i.a.createElement("span",null,"MOUSE(",i.a.createElement("span",null,b),"\xa0\xa0",i.a.createElement("span",{style:{color:S?M:"white"}},"L"),i.a.createElement("span",{style:{color:x?M:"white"}},"M"),i.a.createElement("span",{style:{color:T?M:"white"}},"R"),"\xa0\xa0",i.a.createElement("span",null,"".concat(A.x,", ").concat(A.y)),")")))}}]),r}(i.a.Component),rt={hud:{fontSize:10,color:"white",zIndex:100,marginTop:-100}},nt=function(e){var t=e.parent,r=e.world,n=e.items,i=void 0===n?[]:n,o=e.x,a=void 0===o?0:o,s=e.y,l=void 0===s?0:s,c=e.z,u=void 0===c?0:c,p=e.radius,d=void 0===p?4:p,f=e.height,m=void 0===f?.2:f,v=e.color,g=void 0===v?14540253:v,y=e.segments,w=void 0===y?32:y,b=e.opacity,S=void 0===b?1:b,x=new h.p(d,d+.1*d,m,w),T=new h.Z({color:g,transparent:S<1,opacity:S,flatShading:!0}),R=new h.V(x,T);R.position.x=a,R.position.y=l,R.position.z=u,i.forEach(function(e,t){e.model.position.z=d-1,k(e.model,R.position,{y:2*Math.PI/i.length*t}),B(R,e),e.bodies&&e.bodies[0].position.set(e.model.position.x,e.model.position.y,e.model.position.z)}),B(t,R);var A=r.add({type:"cylinder",size:[d,m],pos:[a,l,u],rot:[0,0,0],move:!0,density:.9,friction:.9,restitution:.2,belongsTo:1,collidesWith:4294967295}),M=r.add({type:"cylinder",size:[d,m],pos:[a,l,u],move:!1}),E=r.add({type:"jointHinge",body1:A,body2:M,axe1:[0,1,0],axe2:[0,1,0],pos1:[A.position.x,A.position.y,A.position.z],pos2:[M.position.x,M.position.y,M.position.z]});return{model:R,bodies:[A,M,E],timelines:{swipe:{while:!0,update:function(e,t,r,n){var i=n.gamepadController;i.rightTrigger?e.bodies[0].angularVelocity.set(0,i.rightTrigger,0):i.leftTrigger&&e.bodies[0].angularVelocity.set(0,-i.leftTrigger,0)}}}}},it=r(21),ot=function(){var e=Object(Ke.a)(Ve.a.mark(function e(t){var r,n,i,o,a,s,l,c,u,p,d,f,h,m;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parent,n=t.x,i=void 0===n?0:n,o=t.z,a=void 0===o?0:o,s=t.y,l=void 0===s?0:s,c=t.scale,u=void 0===c?1:c,p=t.mesh,d=t.morphTargets,f=void 0===d?{}:d,e.t0=H,e.next=4,Promise.resolve(p);case 4:return e.t1=e.sent,(h=(0,e.t0)(e.t1)).position.x=i,h.position.y=l,h.position.z=a,h.scale.x=u,h.scale.y=u,h.scale.z=u,B(r,h),m={},Object.keys(f).forEach(function(e){var t=f[e];m[e]=function(e){if(void 0===e||null===e)return h.morphTargetInfluences[t];h.morphTargetInfluences[t]=X(e,0,1)}}),e.abrupt("return",{model:h,poses:m});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),at=r(23),st=r.n(at),lt=W(new it.a).load(st.a),ct=function(){var e=Object(Ke.a)(Ve.a.mark(function e(t){var r,n,i,o,a,s,l,c;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parent,n=t.x,i=void 0===n?0:n,o=t.y,a=void 0===o?0:o,s=t.z,l=void 0===s?0:s,e.next=3,ot({parent:r,x:i,y:a,z:l,mesh:lt,scale:.0035});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ut=function(e){h.fb.apply(this,arguments),e=e||{},this.PARTICLE_COUNT=e.maxParticles||1e6,this.PARTICLE_CONTAINERS=e.containerCount||1,this.PARTICLE_NOISE_TEXTURE=e.particleNoiseTex||null,this.PARTICLE_SPRITE_TEXTURE=e.particleSpriteTex||null,this.PARTICLES_PER_CONTAINER=Math.ceil(this.PARTICLE_COUNT/this.PARTICLE_CONTAINERS),this.PARTICLE_CURSOR=0,this.time=0,this.particleContainers=[],this.rand=[];var t,r={vertexShader:["uniform float uTime;","uniform float uScale;","uniform sampler2D tNoise;","attribute vec3 positionStart;","attribute float startTime;","attribute vec3 velocity;","attribute float turbulence;","attribute vec3 color;","attribute float size;","attribute float lifeTime;","varying vec4 vColor;","varying float lifeLeft;","void main() {","\tvColor = vec4( color, 1.0 );","\tvec3 newPosition;","\tvec3 v;","\tfloat timeElapsed = uTime - startTime;","\tlifeLeft = 1.0 - ( timeElapsed / lifeTime );","\tgl_PointSize = ( uScale * size ) * lifeLeft;","\tv.x = ( velocity.x - 0.5 ) * 3.0;","\tv.y = ( velocity.y - 0.5 ) * 3.0;","\tv.z = ( velocity.z - 0.5 ) * 3.0;","\tnewPosition = positionStart + ( v * 10.0 ) * timeElapsed;","\tvec3 noise = texture2D( tNoise, vec2( newPosition.x * 0.015 + ( uTime * 0.05 ), newPosition.y * 0.02 + ( uTime * 0.015 ) ) ).rgb;","\tvec3 noiseVel = ( noise.rgb - 0.5 ) * 30.0;","\tnewPosition = mix( newPosition, newPosition + vec3( noiseVel * ( turbulence * 5.0 ) ), ( timeElapsed / lifeTime ) );","\tif( v.y > 0. && v.y < .05 ) {","\t\tlifeLeft = 0.0;","\t}","\tif( v.x < - 1.45 ) {","\t\tlifeLeft = 0.0;","\t}","\tif( timeElapsed > 0.0 ) {","\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );","\t} else {","\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\t\tlifeLeft = 0.0;","\t\tgl_PointSize = 0.;","\t}","}"].join("\n"),fragmentShader:["float scaleLinear( float value, vec2 valueDomain ) {","\treturn ( value - valueDomain.x ) / ( valueDomain.y - valueDomain.x );","}","float scaleLinear( float value, vec2 valueDomain, vec2 valueRange ) {","\treturn mix( valueRange.x, valueRange.y, scaleLinear( value, valueDomain ) );","}","varying vec4 vColor;","varying float lifeLeft;","uniform sampler2D tSprite;","void main() {","\tfloat alpha = 0.;","\tif( lifeLeft > 0.995 ) {","\t\talpha = scaleLinear( lifeLeft, vec2( 1.0, 0.995 ), vec2( 0.0, 1.0 ) );","\t} else {","\t\talpha = lifeLeft * 0.75;","\t}","\tvec4 tex = texture2D( tSprite, gl_PointCoord );","\tgl_FragColor = vec4( vColor.rgb * tex.a, alpha * tex.a );","}"].join("\n")};for(t=1e5;t>0;t--)this.rand.push(Math.random()-.5);this.random=function(){return++t>=this.rand.length?this.rand[t=1]:this.rand[t]};var n=new h.Gb;this.particleNoiseTex=this.PARTICLE_NOISE_TEXTURE||n.load("textures/perlin-512.png"),this.particleNoiseTex.wrapS=this.particleNoiseTex.wrapT=h.vb,this.particleSpriteTex=this.PARTICLE_SPRITE_TEXTURE||n.load("textures/particle2.png"),this.particleSpriteTex.wrapS=this.particleSpriteTex.wrapT=h.vb,this.particleShaderMat=new h.yb({transparent:!0,depthWrite:!1,uniforms:{uTime:{value:0},uScale:{value:1},tNoise:{value:this.particleNoiseTex},tSprite:{value:this.particleSpriteTex}},blending:h.a,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}),this.particleShaderMat.defaultAttributeValues.particlePositionsStartTime=[0,0,0,0],this.particleShaderMat.defaultAttributeValues.particleVelColSizeLife=[0,0,0,0],this.init=function(){for(var e=0;e<this.PARTICLE_CONTAINERS;e++){var t=new pt(this.PARTICLES_PER_CONTAINER,this);this.particleContainers.push(t),this.add(t)}},this.spawnParticle=function(e){this.PARTICLE_CURSOR++,this.PARTICLE_CURSOR>=this.PARTICLE_COUNT&&(this.PARTICLE_CURSOR=1),this.particleContainers[Math.floor(this.PARTICLE_CURSOR/this.PARTICLES_PER_CONTAINER)].spawnParticle(e)},this.update=function(e){for(var t=0;t<this.PARTICLE_CONTAINERS;t++)this.particleContainers[t].update(e)},this.dispose=function(){this.particleShaderMat.dispose(),this.particleNoiseTex.dispose(),this.particleSpriteTex.dispose();for(var e=0;e<this.PARTICLE_CONTAINERS;e++)this.particleContainers[e].dispose()},this.init()};(ut.prototype=Object.create(h.fb.prototype)).constructor=ut;var pt=function(e,t){h.fb.apply(this,arguments),this.PARTICLE_COUNT=e||1e5,this.PARTICLE_CURSOR=0,this.time=0,this.offset=0,this.count=0,this.DPR=window.devicePixelRatio,this.GPUParticleSystem=t,this.particleUpdate=!1,this.particleShaderGeo=new h.k,this.particleShaderGeo.addAttribute("position",new h.j(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("positionStart",new h.j(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("startTime",new h.j(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderGeo.addAttribute("velocity",new h.j(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("turbulence",new h.j(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderGeo.addAttribute("color",new h.j(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("size",new h.j(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderGeo.addAttribute("lifeTime",new h.j(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderMat=this.GPUParticleSystem.particleShaderMat;var r=new h.Qb,n=new h.Qb,i=new h.m;this.spawnParticle=function(e){var o=this.particleShaderGeo.getAttribute("positionStart"),a=this.particleShaderGeo.getAttribute("startTime"),s=this.particleShaderGeo.getAttribute("velocity"),l=this.particleShaderGeo.getAttribute("turbulence"),c=this.particleShaderGeo.getAttribute("color"),u=this.particleShaderGeo.getAttribute("size"),p=this.particleShaderGeo.getAttribute("lifeTime");r=void 0!==(e=e||{}).position?r.copy(e.position):r.set(0,0,0),n=void 0!==e.velocity?n.copy(e.velocity):n.set(0,0,0),i=void 0!==e.color?i.set(e.color):i.set(16777215);var d=void 0!==e.positionRandomness?e.positionRandomness:0,f=void 0!==e.velocityRandomness?e.velocityRandomness:0,m=void 0!==e.colorRandomness?e.colorRandomness:1,v=void 0!==e.turbulence?e.turbulence:1,g=void 0!==e.lifetime?e.lifetime:5,y=void 0!==e.size?e.size:10,w=void 0!==e.sizeRandomness?e.sizeRandomness:0,b=void 0!==e.smoothPosition&&e.smoothPosition;void 0!==this.DPR&&(y*=this.DPR);var S=this.PARTICLE_CURSOR;o.array[3*S+0]=r.x+t.random()*d,o.array[3*S+1]=r.y+t.random()*d,o.array[3*S+2]=r.z+t.random()*d,!0===b&&(o.array[3*S+0]+=-n.x*t.random(),o.array[3*S+1]+=-n.y*t.random(),o.array[3*S+2]+=-n.z*t.random());var x=n.x+t.random()*f,T=n.y+t.random()*f,R=n.z+t.random()*f;x=h.S.clamp((x- -2)/4,0,1),T=h.S.clamp((T- -2)/4,0,1),R=h.S.clamp((R- -2)/4,0,1),s.array[3*S+0]=x,s.array[3*S+1]=T,s.array[3*S+2]=R,i.r=h.S.clamp(i.r+t.random()*m,0,1),i.g=h.S.clamp(i.g+t.random()*m,0,1),i.b=h.S.clamp(i.b+t.random()*m,0,1),c.array[3*S+0]=i.r,c.array[3*S+1]=i.g,c.array[3*S+2]=i.b,l.array[S]=v,u.array[S]=y+t.random()*w,p.array[S]=g,a.array[S]=this.time+.02*t.random(),0===this.offset&&(this.offset=this.PARTICLE_CURSOR),this.count++,this.PARTICLE_CURSOR++,this.PARTICLE_CURSOR>=this.PARTICLE_COUNT&&(this.PARTICLE_CURSOR=0),this.particleUpdate=!0},this.init=function(){this.particleSystem=new h.kb(this.particleShaderGeo,this.particleShaderMat),this.particleSystem.frustumCulled=!1,this.add(this.particleSystem)},this.update=function(e){this.time=e,this.particleShaderMat.uniforms.uTime.value=e,this.geometryUpdate()},this.geometryUpdate=function(){if(!0===this.particleUpdate){this.particleUpdate=!1;var e=this.particleShaderGeo.getAttribute("positionStart"),t=this.particleShaderGeo.getAttribute("startTime"),r=this.particleShaderGeo.getAttribute("velocity"),n=this.particleShaderGeo.getAttribute("turbulence"),i=this.particleShaderGeo.getAttribute("color"),o=this.particleShaderGeo.getAttribute("size"),a=this.particleShaderGeo.getAttribute("lifeTime");this.offset+this.count<this.PARTICLE_COUNT?(e.updateRange.offset=this.offset*e.itemSize,t.updateRange.offset=this.offset*t.itemSize,r.updateRange.offset=this.offset*r.itemSize,n.updateRange.offset=this.offset*n.itemSize,i.updateRange.offset=this.offset*i.itemSize,o.updateRange.offset=this.offset*o.itemSize,a.updateRange.offset=this.offset*a.itemSize,e.updateRange.count=this.count*e.itemSize,t.updateRange.count=this.count*t.itemSize,r.updateRange.count=this.count*r.itemSize,n.updateRange.count=this.count*n.itemSize,i.updateRange.count=this.count*i.itemSize,o.updateRange.count=this.count*o.itemSize,a.updateRange.count=this.count*a.itemSize):(e.updateRange.offset=0,t.updateRange.offset=0,r.updateRange.offset=0,n.updateRange.offset=0,i.updateRange.offset=0,o.updateRange.offset=0,a.updateRange.offset=0,e.updateRange.count=-1,t.updateRange.count=-1,r.updateRange.count=-1,n.updateRange.count=-1,i.updateRange.count=-1,o.updateRange.count=-1,a.updateRange.count=-1),e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0,n.needsUpdate=!0,i.needsUpdate=!0,o.needsUpdate=!0,a.needsUpdate=!0,this.offset=0,this.count=0}},this.dispose=function(){this.particleShaderGeo.dispose()},this.init()};pt.prototype=Object.create(h.fb.prototype),pt.prototype.constructor=pt;var dt=ut,ft=r(24),ht=r.n(ft),mt=W(new h.Gb).load(ht.a),vt=function(){var e=Object(Ke.a)(Ve.a.mark(function e(t){var r,n,i,o,a,s,l,c,u,p,d,f;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.maxParticles,n=void 0===r?250:r,i=t.noiseTexture,o=t.particleTexture,a=t.parent,s=t.options,l=void 0===s?{}:s,c=t.spawnOptions,u=void 0===c?{}:c,p=t.beforeSpawn,d=void 0===p?function(){}:p,e.t0=dt,e.t1=n,e.next=5,Promise.resolve(i||mt);case 5:return e.t2=e.sent,e.next=8,Promise.resolve(o);case 8:return e.t3=e.sent,e.t4={maxParticles:e.t1,particleNoiseTex:e.t2,particleSpriteTex:e.t3},f=new e.t0(e.t4),B(a,f),e.abrupt("return",{emitter:f,options:l,spawnOptions:u,beforeSpawn:d,tick:0});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),gt=r(25),yt=r.n(gt),wt=W(new h.Gb).load(yt.a),bt=function(){var e=Object(Ke.a)(Ve.a.mark(function e(t){var r,n,i,o,a,s,l,c,u,p,d,f,m,v,g,y,w,b;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parent,n=t.x,i=void 0===n?0:n,o=t.y,a=void 0===o?0:o,s=t.z,l=void 0===s?0:s,c=t.height,u=void 0===c?.5:c,p=t.radius,d=void 0===p?.5:p,f=t.verticalSpeed,m=void 0===f?.01:f,v=t.horizontalSpeed,g=void 0===v?.3:v,y=t.color,w=void 0===y?16777215:y,e.next=3,vt({parent:r,particleTexture:wt,maxParticles:250,options:{position:new h.Qb(i,a,l),positionRandomness:0,velocity:new h.Qb,velocityRandomness:0,color:w,colorRandomness:0,turbulence:0,lifetime:12,size:10,sizeRandomness:0,verticalSpeed:m,theta:0},spawnOptions:{spawnRate:20,timeScale:1},beforeSpawn:function(e,t,r){var n=r.options;n.theta+=g,n.position.x=i+Math.cos(n.theta)*d,n.position.y+=n.verticalSpeed,n.position.z=l+Math.sin(n.theta)*d,Math.abs(n.position.y-a)>u&&(n.verticalSpeed*=-1)}});case 3:return b=e.sent,e.abrupt("return",{model:b.emitter,particles:{swirl:b}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),St=r(26),xt=function e(){this._parser=e.parse};(xt.prototype=Object.create(h.n.prototype)).constructor=xt,xt.parse=function(e,t){var r={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function n(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function i(e,t,r,n){for(var i=r*n*4,o=new Uint8Array(e,t,i),a=new Uint8Array(i),s=0,l=0,c=0;c<n;c++)for(var u=0;u<r;u++){var p=o[l],d=o[++l],f=o[++l],h=o[++l];l++,a[s]=f,a[++s]=d,a[++s]=p,a[++s]=h,s++}return a}var o,a=n("DXT1"),s=n("DXT3"),l=n("DXT5"),c=n("ETC1"),u=new Int32Array(e,0,31);if(542327876!==u[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),r;if(4&!u[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),r;var p,d=u[21],f=!1;switch(d){case a:o=8,r.format=h.ub;break;case s:o=16,r.format=h.qb;break;case l:o=16,r.format=h.rb;break;case c:o=8,r.format=h.tb;break;default:if(!(32===u[22]&&16711680&u[23]&&65280&u[24]&&255&u[25]&&4278190080&u[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(p=d,String.fromCharCode(255&p,p>>8&255,p>>16&255,p>>24&255))),r;f=!0,o=64,r.format=h.pb}r.mipmapCount=1,131072&u[2]&&!1!==t&&(r.mipmapCount=Math.max(1,u[7]));var m=u[28];if(r.isCubemap=!!(512&m),r.isCubemap&&(!(1024&m)||!(2048&m)||!(4096&m)||!(8192&m)||!(16384&m)||!(32768&m)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),r;r.width=u[4],r.height=u[3];for(var v=u[1]+4,g=r.isCubemap?6:1,y=0;y<g;y++)for(var w=r.width,b=r.height,S=null,x=null,T=0;T<r.mipmapCount;T++){f?x=(S=i(e,v,w,b)).length:(x=Math.max(4,w)/4*Math.max(4,b)/4*o,S=new Uint8Array(e,v,x));var R={data:S,width:w,height:b};r.mipmaps.push(R),v+=x,w=Math.max(w>>1,1),b=Math.max(b>>1,1)}return r};var Tt=xt,Rt=function(){function e(e){this.manager=void 0!==e?e:h.q,this.dracoLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype={constructor:e,crossOrigin:"Anonymous",load:function(e,t,r,n){var i=this,o=void 0!==this.path?this.path:h.O.extractUrlBase(e),a=new h.v(i.manager);a.setResponseType("arraybuffer"),a.load(e,function(e){try{i.parse(e,o,t,n)}catch(r){if(void 0===n)throw r;n(r)}},r,n)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,s,l){var d,f={};if("string"===typeof e)d=e;else if(h.O.decodeText(new Uint8Array(e,0,4))===a){try{f[r.KHR_BINARY_GLTF]=new c(e)}catch(v){return void(l&&l(v))}d=f[r.KHR_BINARY_GLTF].content}else d=h.O.decodeText(new Uint8Array(e));var m=JSON.parse(d);void 0===m.asset||m.asset.version[0]<2?l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")):(m.extensionsUsed&&(m.extensionsUsed.indexOf(r.KHR_LIGHTS)>=0&&(f[r.KHR_LIGHTS]=new i(m)),m.extensionsUsed.indexOf(r.KHR_MATERIALS_UNLIT)>=0&&(f[r.KHR_MATERIALS_UNLIT]=new o(m)),m.extensionsUsed.indexOf(r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)>=0&&(f[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new p),m.extensionsUsed.indexOf(r.KHR_DRACO_MESH_COMPRESSION)>=0&&(f[r.KHR_DRACO_MESH_COMPRESSION]=new u(this.dracoLoader)),m.extensionsUsed.indexOf(r.MSFT_TEXTURE_DDS)>=0&&(f[r.MSFT_TEXTURE_DDS]=new n)),new j(m,f,{path:t||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(function(e,t,r,n,i){s({scene:e,scenes:t,cameras:r,animations:n,asset:i})},l))}};var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(){if(!Tt)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=new Tt}function i(e){this.name=r.KHR_LIGHTS,this.lights={};var t=(e.extensions&&e.extensions[r.KHR_LIGHTS]||{}).lights||{};for(var n in t){var i,o=t[n],a=(new h.m).fromArray(o.color);switch(o.type){case"directional":(i=new h.r(a)).target.position.set(0,0,1),i.add(i.target);break;case"point":i=new h.jb(a);break;case"spot":i=new h.Cb(a),o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,1),i.add(i.target);break;case"ambient":i=new h.c(a)}i&&(i.decay=2,void 0!==o.intensity&&(i.intensity=o.intensity),i.name=o.name||"light_"+n,this.lights[n]=i)}}function o(e){this.name=r.KHR_MATERIALS_UNLIT}o.prototype.getMaterialType=function(e){return h.W},o.prototype.extendParams=function(e,t,r){var n=[];e.color=new h.m(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var o=i.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==i.baseColorTexture&&n.push(r.assignTexture(e,"map",i.baseColorTexture.index))}return Promise.all(n)};var a="glTF",s=12,l={JSON:1313821514,BIN:5130562};function c(e){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,s);if(this.header={magic:h.O.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==a)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var n=new DataView(e,s),i=0;i<n.byteLength;){var o=n.getUint32(i,!0);i+=4;var c=n.getUint32(i,!0);if(i+=4,c===l.JSON){var u=new Uint8Array(e,s+i,o);this.content=h.O.decodeText(u)}else if(c===l.BIN){var p=s+i;this.body=e.slice(p,p+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function u(e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.dracoLoader=e}function p(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return h.yb},extendParams:function(e,t,r){var n=t.extensions[this.name],i=h.xb.standard,o=h.Kb.clone(i.uniforms),a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),p=i.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",u);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new h.m).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=i.vertexShader,e.fragmentShader=p,e.uniforms=o,e.defines={STANDARD:""},e.color=new h.m(1,1,1),e.opacity=1;var d=[];if(Array.isArray(n.diffuseFactor)){var f=n.diffuseFactor;e.color.fromArray(f),e.opacity=f[3]}if(void 0!==n.diffuseTexture&&d.push(r.assignTexture(e,"map",n.diffuseTexture.index)),e.emissive=new h.m(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new h.m(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var m=n.specularGlossinessTexture.index;d.push(r.assignTexture(e,"glossinessMap",m)),d.push(r.assignTexture(e,"specularMap",m))}return Promise.all(d)},createMaterial:function(e){var t=new h.yb({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var r=this.specularGlossinessParams,n=0,i=r.length;n<i;n++)t[r[n]]=e[r[n]];return t},refreshUniforms:function(e,t,r,n,i,o){if(!0===i.isGLTFSpecularGlossinessMaterial){var a,s,l,c=i.uniforms,u=i.defines;if(c.opacity.value=i.opacity,c.diffuse.value.copy(i.color),c.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),c.map.value=i.map,c.specularMap.value=i.specularMap,c.alphaMap.value=i.alphaMap,c.lightMap.value=i.lightMap,c.lightMapIntensity.value=i.lightMapIntensity,c.aoMap.value=i.aoMap,c.aoMapIntensity.value=i.aoMapIntensity,i.map?a=i.map:i.specularMap?a=i.specularMap:i.displacementMap?a=i.displacementMap:i.normalMap?a=i.normalMap:i.bumpMap?a=i.bumpMap:i.glossinessMap?a=i.glossinessMap:i.alphaMap?a=i.alphaMap:i.emissiveMap&&(a=i.emissiveMap),void 0!==a)if(a.isWebGLRenderTarget&&(a=a.texture),void 0!==a.matrix){if(!0===a.matrixAutoUpdate){s=a.offset,l=a.repeat;var p=a.rotation,d=a.center;a.matrix.setUvTransform(s.x,s.y,l.x,l.y,p,d.x,d.y)}c.uvTransform.value.copy(a.matrix)}else s=a.offset,l=a.repeat,c.offsetRepeat.value.set(s.x,s.y,l.x,l.y);c.envMap.value=i.envMap,c.envMapIntensity.value=i.envMapIntensity,c.flipEnvMap.value=i.envMap&&i.envMap.isCubeTexture?-1:1,c.refractionRatio.value=i.refractionRatio,c.specular.value.copy(i.specular),c.glossiness.value=i.glossiness,c.glossinessMap.value=i.glossinessMap,c.emissiveMap.value=i.emissiveMap,c.bumpMap.value=i.bumpMap,c.normalMap.value=i.normalMap,c.displacementMap.value=i.displacementMap,c.displacementScale.value=i.displacementScale,c.displacementBias.value=i.displacementBias,null!==c.glossinessMap.value&&void 0===u.USE_GLOSSINESSMAP&&(u.USE_GLOSSINESSMAP="",u.USE_ROUGHNESSMAP=""),null===c.glossinessMap.value&&void 0!==u.USE_GLOSSINESSMAP&&(delete u.USE_GLOSSINESSMAP,delete u.USE_ROUGHNESSMAP)}}}}function d(e,t,r,n){h.C.call(this,e,t,r,n)}u.prototype.decodePrimitive=function(e,t){var r=this.dracoLoader,n=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,o={};for(var a in i)a in E&&(o[E[a]]=i[a]);return t.getDependency("bufferView",n).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,t,o)})})},d.prototype=Object.create(h.C.prototype),d.prototype.constructor=d,d.prototype.interpolate_=function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=n-t,u=(r-t)/c,p=u*u,d=p*u,f=e*l,h=f-l,m=2*d-3*p+1,v=d-2*p+u,g=-2*d+3*p,y=d-p,w=0;w!==a;w++){var b=o[h+w+a],S=o[h+w+s]*c,x=o[f+w+a],T=o[f+w]*c;i[w]=m*b+v*S+g*x+y*T}return i};var f=0,m=1,v=2,g=3,y=4,w=5,b=6,S={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x={9728:h.bb,9729:h.K,9984:h.db,9985:h.M,9986:h.cb,9987:h.L},T={33071:h.l,33648:h.ab,10497:h.vb},R={6406:h.b,6407:h.sb,6408:h.pb,6409:h.Q,6410:h.P},A={5121:h.Lb,32819:h.Mb,32820:h.Nb,33635:h.Ob},M={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},E={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},C={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},L={CUBICSPLINE:h.F,LINEAR:h.E,STEP:h.D},I="OPAQUE",O="MASK",P="BLEND";function D(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function U(e,t,r,n){for(var i=e.geometry,o=r.targets,a=!1,s=!1,l=null,c=0,u=o.length;c<u&&(void 0!==(l=o[c]).POSITION&&(a=!0),void 0!==l.NORMAL&&(s=!0),!a||!s);c++);if(a||s){for(var p=[],d=[],f=0,h=o.length;f<h;f++){l=o[f];var m="morphTarget"+f;if(a){if(void 0!==l.POSITION){var v=G(n[l.POSITION]);v.name=m;for(var g=i.attributes.position,y=0,w=v.count;y<w;y++)v.setXYZ(y,v.getX(y)+g.getX(y),v.getY(y)+g.getY(y),v.getZ(y)+g.getZ(y))}else v=i.attributes.position;p.push(v)}if(s){var b;if(void 0!==l.NORMAL){(b=G(n[l.NORMAL])).name=m;for(var S=i.attributes.normal,x=0,T=b.count;x<T;x++)b.setXYZ(x,b.getX(x)+S.getX(x),b.getY(x)+S.getY(x),b.getZ(x)+S.getZ(x))}else b=i.attributes.normal;d.push(b)}}if(a&&(i.morphAttributes.position=p),s&&(i.morphAttributes.normal=d),e.updateMorphTargets(),void 0!==t.weights)for(var R=0,A=t.weights.length;R<A;R++)e.morphTargetInfluences[R]=t.weights[R];if(t.extras&&Array.isArray(t.extras.targetNames)){var M=t.extras.targetNames;if(e.morphTargetInfluences.length===M.length){e.morphTargetDictionary={};for(var E=0,C=M.length;E<C;E++)e.morphTargetDictionary[M[E]]=E}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}}function F(e,t){if(e.indices!==t.indices)return!1;var r=e.attributes||{},n=t.attributes||{},i=Object.keys(r),o=Object.keys(n);if(i.length!==o.length)return!1;for(var a=0,s=i.length;a<s;a++){var l=i[a];if(r[l]!==n[l])return!1}return!0}function _(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];if(F(i.primitive,t))return i.promise}return null}function G(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,r=e.itemSize,n=e.array.slice(0,t*r),i=0;i<t;++i)n[i]=e.getX(i),r>=2&&(n[i+1]=e.getY(i)),r>=3&&(n[i+2]=e.getZ(i)),r>=4&&(n[i+3]=e.getW(i));return new h.j(n,r,e.normalized)}return e.clone()}function j(e,r,n){this.json=e||{},this.extensions=r||{},this.options=n||{},this.cache=new t,this.primitiveCache=[],this.textureLoader=new h.Gb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new h.v(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function k(e,t,r){var n=t.attributes;for(var i in n){var o=E[i],a=r[n[i]];o&&(o in e.attributes||e.addAttribute(o,a))}void 0===t.indices||e.index||e.setIndex(r[t.indices])}return j.prototype.parse=function(e,t){var r=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var n=t.scenes||[],i=n[r.scene||0],o=t.animations||[],a=r.asset,s=t.cameras||[];e(i,n,s,o,a)}).catch(t)},j.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,l=0,c=s.length;l<c;l++)e[s[l]].isBone=!0;for(var u=0,p=e.length;u<p;u++){var d=e[u];void 0!==d.mesh&&(void 0===n[d.mesh]&&(n[d.mesh]=i[d.mesh]=0),n[d.mesh]++,void 0!==d.skin&&(r[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=i},j.prototype.getDependency=function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this.loadMesh(t);break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this.loadBufferView(t);break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this.loadMaterial(t);break;case"texture":n=this.loadTexture(t);break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n},j.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map(function(t,n){return r.getDependency(e,n)})),this.cache.add(e,t)}return t},j.prototype.getMultiDependencies=function(e){for(var t={},r=[],n=0,i=e.length;n<i;n++){var o=e[n],a=this.getDependencies(o);a=a.then(function(e,r){t[e]=r}.bind(this,o+("mesh"===o?"es":"s"))),r.push(a)}return Promise.all(r).then(function(){return t})},j.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(e,r){n.load(D(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},j.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)})},j.prototype.loadAccessor=function(e){var t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return null;var i=[];return void 0!==n.bufferView?i.push(this.getDependency("bufferView",n.bufferView)):i.push(null),void 0!==n.sparse&&(i.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(i).then(function(e){var i,o,a=e[0],s=M[n.type],l=S[n.componentType],c=l.BYTES_PER_ELEMENT,u=c*s,p=n.byteOffset||0,d=r.bufferViews[n.bufferView].byteStride,f=!0===n.normalized;if(d&&d!==u){var m="InterleavedBuffer:"+n.bufferView+":"+n.componentType,v=t.cache.get(m);v||(i=new l(a),v=new h.A(i,d/c),t.cache.add(m,v)),o=new h.B(v,s,p/c,f)}else i=null===a?new l(n.count*s):new l(a,p,n.count*s),o=new h.j(i,s,f);if(void 0!==n.sparse){var g=M.SCALAR,y=S[n.sparse.indices.componentType],w=n.sparse.indices.byteOffset||0,b=n.sparse.values.byteOffset||0,x=new y(e[1],w,n.sparse.count*g),T=new l(e[2],b,n.sparse.count*s);null!==a&&o.setArray(o.array.slice());for(var R=0,A=x.length;R<A;R++){var E=x[R];if(o.setX(E,T[R*s]),s>=2&&o.setY(E,T[R*s+1]),s>=3&&o.setZ(E,T[R*s+2]),s>=4&&o.setW(E,T[R*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})},j.prototype.loadTexture=function(e){var t,n=this,i=this.json,o=this.options,a=this.textureLoader,s=window.URL||window.webkitURL,l=i.textures[e],c=l.extensions||{},u=(t=c[r.MSFT_TEXTURE_DDS]?i.images[c[r.MSFT_TEXTURE_DDS].source]:i.images[l.source]).uri,p=!1;return void 0!==t.bufferView&&(u=n.getDependency("bufferView",t.bufferView).then(function(e){p=!0;var r=new Blob([e],{type:t.mimeType});return u=s.createObjectURL(r)})),Promise.resolve(u).then(function(e){var t=h.N.Handlers.get(e);return t||(t=c[r.MSFT_TEXTURE_DDS]?n.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise(function(r,n){t.load(D(e,o.path),r,void 0,n)})}).then(function(e){!0===p&&s.revokeObjectURL(u),e.flipY=!1,void 0!==l.name&&(e.name=l.name),c[r.MSFT_TEXTURE_DDS]||(e.format=void 0!==l.format?R[l.format]:h.pb),void 0!==l.internalFormat&&e.format!==R[l.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),e.type=void 0!==l.type?A[l.type]:h.Lb;var t=(i.samplers||{})[l.sampler]||{};return e.magFilter=x[t.magFilter]||h.K,e.minFilter=x[t.minFilter]||h.L,e.wrapS=T[t.wrapS]||h.vb,e.wrapT=T[t.wrapT]||h.vb,e})},j.prototype.assignTexture=function(e,t,r){return this.getDependency("texture",r).then(function(r){e[t]=r})},j.prototype.loadMaterial=function(e){var t,n=this.extensions,i=this.json.materials[e],o={},a=i.extensions||{},s=[];if(a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=n[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(i),s.push(l.extendParams(o,i,this))}else if(a[r.KHR_MATERIALS_UNLIT]){var c=n[r.KHR_MATERIALS_UNLIT];t=c.getMaterialType(i),s.push(c.extendParams(o,i,this))}else{t=h.Z;var u=i.pbrMetallicRoughness||{};if(o.color=new h.m(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){var p=u.baseColorFactor;o.color.fromArray(p),o.opacity=p[3]}if(void 0!==u.baseColorTexture&&s.push(this.assignTexture(o,"map",u.baseColorTexture.index)),o.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,o.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture){var d=u.metallicRoughnessTexture.index;s.push(this.assignTexture(o,"metalnessMap",d)),s.push(this.assignTexture(o,"roughnessMap",d))}}!0===i.doubleSided&&(o.side=h.s);var f=i.alphaMode||I;return f===P?o.transparent=!0:(o.transparent=!1,f===O&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==h.W&&(s.push(this.assignTexture(o,"normalMap",i.normalTexture.index)),o.normalScale=new h.Pb(1,1),void 0!==i.normalTexture.scale&&o.normalScale.set(i.normalTexture.scale,i.normalTexture.scale)),void 0!==i.occlusionTexture&&t!==h.W&&(s.push(this.assignTexture(o,"aoMap",i.occlusionTexture.index)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==h.W&&(o.emissive=(new h.m).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==h.W&&s.push(this.assignTexture(o,"emissiveMap",i.emissiveTexture.index)),Promise.all(s).then(function(){var e;return e=t===h.yb?n[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),void 0!==i.name&&(e.name=i.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=h.Wb),e.emissiveMap&&(e.emissiveMap.encoding=h.Wb),i.extras&&(e.userData=i.extras),e})},j.prototype.loadGeometries=function(e){var t=this,n=this.extensions,i=this.primitiveCache;return this.getDependencies("accessor").then(function(o){function a(e){return k(e,p,o),e}for(var s=[],l=null,c=0,u=e.length;c<u;c++){var p=e[c],d=_(i,p);if(d)s.push(d);else if(p.extensions&&p.extensions[r.KHR_DRACO_MESH_COMPRESSION])l=n[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(p,t).then(a),i.push({primitive:p,promise:l}),s.push(l);else{var f=new h.k;k(f,p,o),l=Promise.resolve(f),i.push({primitive:p,promise:l}),s.push(l)}}return Promise.all(s)})},j.prototype.loadMesh=function(e){var t=this,n=this.extensions,i=this.json.meshes[e];return this.getMultiDependencies(["accessor","material"]).then(function(o){var a=new h.z,s=i.primitives;return t.loadGeometries(s).then(function(l){for(var c=0,u=s.length;c<u;c++){var p=s[c],d=l[c],S=void 0===p.material?new h.Z({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:h.x}):o.materials[p.material];S.aoMap&&void 0===d.attributes.uv2&&void 0!==d.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),d.addAttribute("uv2",new h.j(d.attributes.uv.array,2)));var x,T,R=void 0!==d.attributes.color,A=void 0===d.attributes.normal,M=!0===i.isSkinnedMesh,E=void 0!==p.targets;if(R||A||M||E)if(S.isGLTFSpecularGlossinessMaterial)S=n[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(S);else S=S.clone();if(R&&(S.vertexColors=h.Tb,S.needsUpdate=!0),A&&(S.flatShading=!0),p.mode===y||p.mode===w||p.mode===b||void 0===p.mode)M?(x=new h.Bb(d,S),S.skinning=!0):x=new h.V(d,S),p.mode===w?x.drawMode=h.Ib:p.mode===b&&(x.drawMode=h.Hb);else if(p.mode===m||p.mode===g||p.mode===v){T="LineBasicMaterial:"+S.uuid;var C=t.cache.get(T);C||(C=new h.H,h.R.prototype.copy.call(C,S),C.color.copy(S.color),C.lights=!1,t.cache.add(T,C)),S=C,x=p.mode===m?new h.J(d,S):p.mode===g?new h.G(d,S):new h.I(d,S)}else{if(p.mode!==f)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);T="PointsMaterial:"+S.uuid;var L=t.cache.get(T);L||(L=new h.lb,h.R.prototype.copy.call(L,S),L.color.copy(S.color),L.map=S.map,L.lights=!1,t.cache.add(T,L)),S=L,x=new h.kb(d,S)}if(x.name=i.name||"mesh_"+e,E&&(U(x,i,p,o.accessors),S.morphTargets=!0,void 0!==x.geometry.morphAttributes.normal&&(S.morphNormals=!0)),void 0!==i.extras&&(x.userData=i.extras),void 0!==p.extras&&(x.geometry.userData=p.extras),!0===S.isGLTFSpecularGlossinessMaterial&&(x.onBeforeRender=n[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),!(s.length>1))return x;x.name+="_"+c,a.add(x)}return a})})},j.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new h.hb(h.S.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new h.gb(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar)),void 0!==r.name&&(t.name=r.name),r.extras&&(t.userData=r.extras),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},j.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return r.inverseBindMatrices=e,r})},j.prototype.loadAnimation=function(e){var t=this.json.animations[e];return this.getMultiDependencies(["accessor","node"]).then(function(r){var n=[];function i(e){!0===e.isMesh&&!0===e.material.morphTargets&&S.push(e.name?e.name:e.uuid)}for(var o=0,a=t.channels.length;o<a;o++){var s,l=t.channels[o],c=t.samplers[l.sampler];if(c){var u=l.target;s=void 0!==u.node?u.node:u.id;var p=void 0!==t.parameters?t.parameters[c.input]:c.input,f=void 0!==t.parameters?t.parameters[c.output]:c.output,m=r.accessors[p],v=r.accessors[f],g=r.nodes[s];if(g){var y;switch(g.updateMatrix(),g.matrixAutoUpdate=!0,C[u.path]){case C.weights:y=h.eb;break;case C.rotation:y=h.ob;break;case C.position:case C.scale:default:y=h.Sb}var w=g.name?g.name:g.uuid,b=void 0!==c.interpolation?L[c.interpolation]:h.E,S=[];C[u.path]===C.weights?g.traverse(i):S.push(w);for(var x=0,T=S.length;x<T;x++){var R=new y(S[x]+"."+C[u.path],h.f.arraySlice(m.array,0),h.f.arraySlice(v.array,0),b);"CUBICSPLINE"===c.interpolation&&(R.createInterpolant=function(e){return new d(this.times,this.values,this.getValueSize()/3,e)},R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),n.push(R)}}}}return s=void 0!==t.name?t.name:"animation_"+e,new h.d(s,void 0,n)})},j.prototype.loadNode=function(e){var t=this.extensions,n=this.json.meshReferences,i=this.json.meshUses,o=this.json.nodes[e];return this.getMultiDependencies(["mesh","skin","camera","light"]).then(function(e){var a;if(!0===o.isBone)a=new h.g;else if(void 0!==o.mesh){var s=e.meshes[o.mesh];if(a=s.clone(),!0===s.isGroup)for(var l=0,c=s.children.length;l<c;l++){var u=s.children[l];u.material&&!0===u.material.isGLTFSpecularGlossinessMaterial&&(a.children[l].onBeforeRender=u.onBeforeRender)}else s.material&&!0===s.material.isGLTFSpecularGlossinessMaterial&&(a.onBeforeRender=s.onBeforeRender);n[o.mesh]>1&&(a.name+="_instance_"+i[o.mesh]++)}else if(void 0!==o.camera)a=e.cameras[o.camera];else if(o.extensions&&o.extensions[r.KHR_LIGHTS]&&void 0!==o.extensions[r.KHR_LIGHTS].light){a=t[r.KHR_LIGHTS].lights[o.extensions[r.KHR_LIGHTS].light]}else a=new h.fb;if(void 0!==o.name&&(a.name=h.mb.sanitizeNodeName(o.name)),o.extras&&(a.userData=o.extras),void 0!==o.matrix){var p=new h.U;p.fromArray(o.matrix),a.applyMatrix(p)}else void 0!==o.translation&&a.position.fromArray(o.translation),void 0!==o.rotation&&a.quaternion.fromArray(o.rotation),void 0!==o.scale&&a.scale.fromArray(o.scale);return a})},j.prototype.loadScene=function(){function e(t,r,n,i,o){var a=i[t],s=n.nodes[t];if(void 0!==s.skin)for(var l=!0===a.isGroup?a.children:[a],c=0,u=l.length;c<u;c++){for(var p=l[c],d=o[s.skin],f=[],m=[],v=0,g=d.joints.length;v<g;v++){var y=d.joints[v],w=i[y];if(w){f.push(w);var b=new h.U;void 0!==d.inverseBindMatrices&&b.fromArray(d.inverseBindMatrices.array,16*v),m.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',y)}p.bind(new h.zb(f,m),p.matrixWorld)}if(r.add(a),s.children)for(var S=s.children,x=0,T=S.length;x<T;x++){e(S[x],a,n,i,o)}}return function(t){var n=this.json,i=this.extensions,o=this.json.scenes[t];return this.getMultiDependencies(["node","skin"]).then(function(t){var a=new h.wb;void 0!==o.name&&(a.name=o.name),o.extras&&(a.userData=o.extras);for(var s=o.nodes||[],l=0,c=s.length;l<c;l++)e(s[l],a,n,t.nodes,t.skins);if(o.extensions&&o.extensions[r.KHR_LIGHTS]&&void 0!==o.extensions[r.KHR_LIGHTS].light){var u=i[r.KHR_LIGHTS].lights;a.add(u[o.extensions[r.KHR_LIGHTS].light])}return a})}}(),e}(),At=r(27),Mt=r.n(At),Et=W(new Rt).load(Mt.a).then(function(e){return function e(t){if(t){if(t.isMesh)return t;if(t.children&&t.children.length)for(var r=0;r<t.children.length;r++){var n=e(t.children[r]);if(n&&n.isMesh)return n}}}(e.scene)}),Ct=function(){var e=Object(Ke.a)(Ve.a.mark(function e(t){var r,n,i,o,a,s,l,c,u;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parent,n=t.x,i=void 0===n?0:n,o=t.y,a=void 0===o?0:o,s=t.z,l=void 0===s?0:s,e.next=3,ot({parent:r,x:i,y:a,z:l,mesh:Et,morphTargets:{rudderLeft:0,rudderRight:1,leftFlapUp:2,leftFlapDown:3,rightFlapUp:4,rightFlapDown:5}});case 3:return c=e.sent,(u={}).controls={while:!0,directions:[{heading:0,pose:"rudderRight"},{heading:-60,pose:"leftFlapDown"},{heading:-120,pose:"leftFlapUp"},{heading:-180,pose:"rudderLeft"},{heading:60,pose:"rightFlapUp"},{heading:120,pose:"rightFlapDown"},{heading:180,pose:"rudderLeft"}],update:function(e,t,r,n){var i=r.directions,o=n.gamepadController,a=null;if(null!==o.leftStick.heading){var s=h.S.radToDeg(o.leftStick.heading),l=i.find(function(e){return Y(s,e.heading-30,e.heading+30)});l&&(a=l.pose)}i.forEach(function(t){var r=e.poses[t.pose],n=r();r(n+(t.pose===a?.01:-.01))})}},e.abrupt("return",Object(St.a)({},c,{timelines:u}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Lt=r(28),It=new h.wb,Ot=function(){var e=new h.hb(90,window.innerWidth/window.innerHeight,1,1e3),t=e.lookAt;return e.lookAt=function(r){t.apply(e,[r]),e.target=r},e.timelines={},e.shake=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;e.timelines.shake||(e.timelines.shake={duration:t,startPos:e.position.clone(),seed:Date.now(),update:function(e,t,r,n){var i=n.seed,o=n.startPos;e.position.x=o.x+K(Object(Ye.noise)(i+r),0,1,-1.25,1.25),e.position.y=o.y+K(Object(Ye.noise)(i+250+r),0,1,-1.25,1.25)}})},e.resize=function(t,r,n){e.aspect=t/r,e.updateProjectionMatrix()},e}(),Pt=new Lt.a({timestep:1/60,iterations:8,broadphase:2,worldscale:1,random:!0,info:!1,gravity:[0,-9.8,0]}),Dt=Object(Ke.a)(Ve.a.mark(function e(){var t,r,n,o,a,s,l,c,u;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return G(It),Pt.clear(),t=new h.c(16777215,1),(r=new h.r(16777215,.95)).position.set(50,50,50),It.add(t),It.add(r),Ot.position.set(0,2,6),Ot.lookAt(new h.Qb(0,0,0)),e.next=11,$e({y:1});case 11:return n=e.sent,e.next=14,ct({y:1});case 14:return o=e.sent,e.next=17,bt({y:1});case 17:return a=e.sent,e.next=20,Ct({y:1});case 20:return s=e.sent,l=nt({parent:It,world:Pt,items:[o,n,a,s]}),c={renderer:i.a.createElement(tt,null)},u={scene:It,camera:Ot,world:Pt,droid:o,cuphead:n,portal:a,jet:s,turntable:l,hud:c},e.abrupt("return",u);case 25:case"end":return e.stop()}},e)})),Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pixelSize,r=void 0===t?5:t,n=e.borderSize,i=void 0===n?1:n,o=e.lightenFactor,a=void 0===o?1.8:o,s=e.softenFactor,l=void 0===s?.75:s,c=e.darkenFactor,u=void 0===c?.5:c,p=e.resolution;return{uniforms:{tDiffuse:{value:null},pixelSize:{value:r},borderFraction:{value:i/r},lightenFactor:{value:a},softenFactor:{value:l},darkenFactor:{value:u},resolution:{value:void 0===p?new h.Pb(window.innerWidth,window.innerHeight):p}},vertexShader:"\n\t\t\tvarying highp vec2 vUv;\n\n\t\t\tvoid main() {\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t}",fragmentShader:"\n\t\t\tuniform sampler2D tDiffuse;\n\t\t\tuniform float pixelSize;\n\t\t\tuniform float borderFraction;\n\t\t\tuniform float lightenFactor;\n\t\t\tuniform float softenFactor;\n\t\t\tuniform float darkenFactor;\n\t\t\tuniform vec2 resolution;\n\n\t\t\tvarying highp vec2 vUv;\n\n\t\t\tvoid main(){\n\t\t\t\tvec2 dxy = pixelSize / resolution;\n\t\t\t\tvec2 pixel = vUv / dxy;\n\t\t\t\tvec2 fraction = fract(pixel);\n\t\t\t\tvec2 coord = dxy * floor(pixel);\n\t\t\t\tvec3 color = texture2D(tDiffuse, coord).xyz;\n\n\t\t\t\tif (fraction.y > (1.0 - borderFraction))\n\t\t\t\t\tcolor = color * lightenFactor;\n\n\t\t\t\tif (fraction.x < borderFraction)\n\t\t\t\t\tcolor = color * softenFactor;\n\n\t\t\t\tif (fraction.y < borderFraction)\n\t\t\t\t\tcolor = color * darkenFactor;\n\n\t\t\t\tgl_FragColor = vec4(color, 1);\n\t\t\t}"}};r(15);function Ft(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(p.a)(e);if(t){var i=Object(p.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var _t=function(e){Object(c.a)(r,e);var t=Ft(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return i.a.createElement(d.GameEngine,{className:"game",systems:We,entities:Dt(),renderer:U(new w(Ut()))})}}]),r}(i.a.Component),Gt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function jt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a.a.render(i.a.createElement(_t,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Gt?(function(e,t){fetch(e).then(function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):jt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):jt(t,e)})}}()}],[[31,1,2]]]);
//# sourceMappingURL=main.bad9cdd1.chunk.js.map